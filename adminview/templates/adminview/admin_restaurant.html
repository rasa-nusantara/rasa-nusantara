{# adminview/templates/adminview/admin_restaurant.html #}
{% extends 'base.html' %}
{% load static %}

{% block meta %}
Admin View - Rasa Nusantara
{% endblock meta %}

{% block content %}
{% include 'navbar.html' %}

<div class="min-h-screen flex flex-col bg-[#453229] w-full pt-20 pb-8">
    <div class="section mb-12">
        <div class="flex items-center justify-between px-6">
            <h1 class="text-2xl text-white mb-6">Restaurant Management</h1>
            <a href="{% url 'adminview:add_restaurant' %}" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">Add New Restaurant</a>
        </div>

        <div class="flex flex-wrap justify-center gap-6 overflow-y-auto h-auto">
            {% for restaurant in restaurants %}
            <div class="bg-white shadow-lg rounded-lg overflow-hidden w-[22%] flex-shrink-0 flex flex-col">
                {% if restaurant.image %}
                <img src="{{ restaurant.image.url }}" alt="{{ restaurant.name }}" class="w-full h-[180px] object-cover">
                {% else %}
                <img src="{% static 'image/default_restaurant.webp' %}" alt="{{ restaurant.name }}" class="w-full h-[180px] object-cover">
                {% endif %}

                <div class="p-4 flex flex-col">
                    <h3 class="text-lg font-bold mb-1 text-gray-800">{{ restaurant.name }}</h3>
                    <p>{{ restaurant.location }}</p>
                    <p>Rating: {{ restaurant.rating }}/5</p>
                    <p>Price: ${{ restaurant.average_price }}</p>
                    
                    <div class="flex gap-2 mt-4">
                        <a href="{% url 'adminview:edit_restaurant' restaurant.id %}" class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">Edit</a>
                        <button onclick="confirmDelete({{ restaurant.id }})" class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">Delete</button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
function confirmDelete(id) {
    if (confirm('Are you sure you want to delete this restaurant?')) {
        window.location.href = `/adminview/delete/${id}/`;
    }
}
</script>
{% endblock content %}